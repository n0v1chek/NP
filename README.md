# Potolki Bot - Визуализация натяжных потолков

Telegram-бот для визуализации натяжных потолков с использованием AI.

## Описание

Бот позволяет клиентам загрузить фото помещения и получить визуализацию с натяжным потолком. Пользователь выбирает параметры потолка через интерактивное меню, и AI генерирует реалистичное изображение.

## Функционал

### Для пользователей
- Загрузка фото помещения
- Настройка параметров потолка через кнопки:
  - **Цвет**: белый, айвори, бежевый, серый, тёмно-серый, чёрный, голубой, розовый
  - **Текстура**: матовый, глянцевый, сатиновый, металлик
  - **Профили по стенам**: обычный, теневой (чёрная линия), парящий (LED подсветка)
  - **Точечные светильники**: 1, 2, 4, 6, 8, 10, 12, 16 шт (круглые, квадратные, двойные, поворотные)
  - **Люстры**: современная, классика, хрусталь, минимализм, спутник, кольцо, кластер, лофт
  - **Световые линии**: количество, направление, форма
  - **Трековые системы**: чёрные, белые
  - **LED подсветка**: тёплая, холодная, RGB
  - **Ниша для штор**
  - **Двухуровневый потолок**
- Просмотр баланса и истории операций
- Запрос доступа к боту

### Для администратора
- Управление компаниями
- Управление пользователями
- Заявки на доступ
- Статистика и отчёты

## Технологии

- **Node.js** + **Telegraf** (Telegram Bot API)
- **Replicate API** для генерации изображений
- **Sharp** для обработки изображений
- **JSON** файл для хранения данных

## Структура проекта

```
potolki-bot/
├── bot.js          # Основной код бота
├── data.json       # База данных
├── .env            # Конфигурация (не в репозитории)
├── package.json    # Зависимости
└── README.md       # Документация
```

## Установка

```bash
# Клонировать репозиторий
git clone <repo-url>
cd potolki-bot

# Установить зависимости
npm install

# Создать .env файл с настройками
# TELEGRAM_BOT_TOKEN=...
# REPLICATE_API_TOKEN=...
# ADMIN_IDS=...

# Запустить
pm2 start bot.js --name potolki-bot
```

## Статус разработки

### Готово
- Генерация визуализаций
- Полное меню настройки потолка
- Админ-панель
- Система компаний и сотрудников
- Заявки на доступ
- Баланс и транзакции
- Отчёты по компаниям

### В разработке
- Интеграция оплаты

## Известные ограничения

1. **Количество светильников**: AI-модель не всегда точно соблюдает указанное количество. Используется описание через сетку (rows × columns) для улучшения точности.

2. **Направление стен**: Модель может путать направления стен.

## Команды бота

- `/start` - Главное меню

---

*Последнее обновление: декабрь 2024*
